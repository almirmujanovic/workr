<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Job Details</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
</head>
<body>
<h1 th:text="${job.title}"></h1>
<p th:text="${job.description}"></p>

<form th:action="@{/applications/apply/{jobId}(jobId=${job.id})}" method="post">
    <label for="applicationText">Why do you want this job?</label>
    <textarea id="applicationText" name="applicationText" required></textarea>
    <button type="submit">Apply</button>
</form>

<!-- ✅ Success Popup Message (Hidden by Default) -->
<div id="success-popup" class="popup" style="display: none;">
    <div class="popup-content">
        <p>Application submitted successfully!</p>
        <button onclick="closePopup()">OK</button>
    </div>
</div>

<!-- ✅ JavaScript for Showing the Popup -->
<script>
    function showPopup() {
        document.getElementById("success-popup").style.display = "flex";
    }
    function closePopup() {
        document.getElementById("success-popup").style.display = "none";
    }

    // ✅ Show popup if success flag exists
    window.onload = function () {
        if (window.location.search.includes("success=ApplicationSubmitted")) {
            showPopup();
        }
    };
</script>
</body>
</html>
